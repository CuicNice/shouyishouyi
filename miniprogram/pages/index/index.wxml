<view class="bg"></view>
<!--胶囊区域 -->
<view class="top-bar" style="background:rgba({{topBarRgb}});">
  <!-- 信号区 -->
  <view style="height:{{statusBarHeight}}px;">
  </view>
  <!-- 胶囊区 -->
  <!-- 获取胶囊的高度来设置胶囊所在行的高度 -->
  <view class="capsule-box" style="height:{{capsuleBoxHeight}}px;">
    <view class="barLineItem">
      <view class="barText" wx:if="{{isLogin}}">你好呀~{{userName}}
      </view>
      <view class="barText"  bindtap="showBindDialog" wx:else>首义的朋友请点击登录哇！
      </view>
      <!--头像后面的三个点 -->
      <view class="barTextDot">
        <image class="barTextDotSvg" src="/static/svg/myWidget/myWidget_dot.svg" mode="" />
      </view>
    </view>
    <view class="barLineItem"></view>
  </view>
</view>
<!--伪topbar,用于占位-->
<view style="height:{{statusBarHeight + capsuleBoxHeight}}px;">
</view>
<!-- function area -->
<view class="areaBox">
  <view class="functionArea">
    <view class="areaItem" wx:for="{{functionList}}" bindtap="goToPage" data-path="{{item.pageRouth}}">
      <image class="areaItemImage" src="{{item.icon}}"></image>
      <view class="areaItemName">{{item.name}}</view>
    </view>
  </view>
</view>
<view class="pageBanner">
  <banner imageList="{{bannerList}}"></banner>
</view>
<!-- 静态组件区域-->
<view class="container">
  <!-- 组件展示 -->
  <block style="display: flex;" wx:for="{{indexTabListTemp}}" wx:for-item="item" wx:key="{{index}}">
    <miniScore wx:if="{{item.name=='成绩单'}}" style="order:{{item.index}}"></miniScore>
    <!-- 组件 -->
    <!-- 组件 -->
    <miniNews wx:if="{{item.name=='快讯闻'}}" style="order:{{item.index}}"></miniNews>
    <!-- 组件 -->
    <countDown wx:if="{{item.name=='首义+倒计时'}}" style="order:{{item.index}}"></countDown>
    <miniElectric wx:if="{{item.name=='寝室电费'}}" style="order:{{item.index}}"></miniElectric>
    <classTable wx:if="{{item.name=='每日课表'}}" style="order:{{item.index}}"></classTable>
  </block>
</view>

<!-- 弹窗组件 -->
<toast id="toast"></toast>
<!-- 绑定账号提示框 -->
<dialogTitle title="是否绑定校园账号?" showDialog="{{showBindDialog}}" schoolBuiltSrc="https://introduce.mcdd.top/schoolBuilt/zhonglou.svg">
  <view style="display: flex;">
    <button class="btn" type="primary" style="width: 224rpx;" plain="{{true}}" bindtap="closeBindDialog">取消</button>
    <button class="btn" type="primary" style="width: 224rpx;background: #20C38C;" bindtap="showLoginDialog">确定</button>
  </view>
</dialogTitle>

<!-- 绑定账号半屏弹窗 -->
<dialogTitle title="请登录你的教务系统账号" type="half-screen" showDialog="{{showLoginDialog}}">
  <view class="input">
    <text class="label">学号</text>
    <input bindinput="getXh" type="number" placeholder="eg:20191110040" placeholder-style="width:300rpx;height: 40rpx;text-align: right;font-family: 'PingFang SC';font-style: normal;font-weight: 400;font-size: 28rpx;line-height: 40rpx;"/>
  </view>
  <view class="tips">如果是初始的教务系统密码为身份证后八位，如果不能登录请确保此账号密码能在学校的教务系统上成功登录！</view>
  <view class="input" style="margin-top: 68rpx;">
    <text class="label">密码</text>
    <input bindinput="getMm" type="text" placeholder="eg:20191110040" password="true" placeholder-style="width:300rpx;height: 40rpx;text-align: right;font-family: 'PingFang SC';font-style: normal;font-weight: 400;font-size: 28rpx;line-height: 40rpx;" />
  </view>
  <view class="tips">如果是初始的教务系统密码为身份证后八位</view>
  <view class="loginDialogBoxBtn">
    <button class="btn" type="primary" style="width: 224rpx;" plain="{{true}}" bindtap="closeLoginDialog">取消</button>
    <button class="btn" type="primary" style="width: 224rpx;background: #20C38C;" bindtap="login">登录</button>
  </view>
</dialogTitle>

